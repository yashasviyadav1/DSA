# 122. Best Time to Buy and Sell Stock II
prerequisite : buy sell stocks 2 [Link](https://leetcode.com/problems/best-time-to-buy-and-sell-stock-ii)
### Solved at : [Leetcode](https://leetcode.com/problems/best-time-to-buy-and-sell-stock-iii)

## ✔️Approach - 2 (top down dp)
```java
class Solution {
    // ✔️Approach - 2
    // top down dp (memoization)
    // prerequisite : buy sell stocks ii
    // idea : 3 changing parameters 
    private int solve(int[] prices, int[][][] dp, int index,  int buy, int transactions){
        if(index == prices.length) return 0; // all stocks finished
        if(transactions == 0) return 0; // transaction limit reached
        if(dp[index][buy][transactions] != -1) return dp[index][buy][transactions];

        int profit = 0;
        if(buy == 1){
            // max( buyToday, buyLater)
            profit = Math.max( -prices[index] + solve(prices, dp, index + 1, 0,transactions)
                                , 0 + solve(prices, dp, index + 1, 1, transactions)
                    );
        } 
        else{// max( sellToday, sellLater)
            // if we sell means 1 transaction is completed, so decrement transactions by 1
            profit = Math.max( +prices[index] + solve(prices, dp, index + 1, 1, transactions - 1)
                                , 0 + solve(prices, dp, index+1, 0, transactions)
                    );
        }
        return dp[index][buy][transactions] = profit;
    }
    public int maxProfit(int[] prices) {
        int transactions = 2;
        int buy = 1;
        int n = prices.length;
        // 3 changing parameter
        // index (fom 0 to n-1 => n) buy (from 0 to 1 => 2) transactions(from 2 to 0 => 3)
        int[][][] dp = new int[n][2][3];
        for(int[][] twoD:dp)
            for(int[] row:twoD)
                Arrays.fill(row, -1);

        return solve(prices, dp, 0, buy, transactions);
    }
}
```

## [⚠️TLE] Approach - 1 (bruteforce -> trying all ways) 
```java
class Solution {
    // Time limit 
    private int solve(int[] prices, int index, int transactions, int buy){
        if(index == prices.length) return 0; // all stocks finished
        if(transactions == 2) return 0; // transaction limit reached

        int profit = 0;
        if(buy == 1){
            // max( buyToday, buyLater)
            profit = Math.max( -prices[index] + solve(prices, index + 1, transactions, 0)
                                , 0 + solve(prices, index + 1, transactions, 1)
                    );
        } 
        else{// max( sellToday, sellLater)
            profit = Math.max( +prices[index] + solve(prices, index + 1, transactions + 1, 1)
                                , 0 + solve(prices, index+1, transactions, 0)
                    );
        }
        return profit;
    }
    public int maxProfit(int[] prices) {
        int transactions = 0;
        int buy = 1;
        int n = prices.length;
        return solve(prices, 0, transactions, buy);
    }
}
```
